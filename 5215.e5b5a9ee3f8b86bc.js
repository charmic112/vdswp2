"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5215],{5215:(at,y,u)=>{u.r(y),u.d(y,{HomePageModule:()=>st});var k=u(2200),c=u(9893),C=u(4341),T=u(8132),h=u(467),t=u(3664),d=u(2615),_=u(9330),b=u(7673),j=u(1985),R=u(8359);class U extends R.yU{constructor(s,i){super()}schedule(s,i=0){return this}}const w={setInterval(a,s,...i){const{delegate:e}=w;return e?.setInterval?e.setInterval(a,s,...i):setInterval(a,s,...i)},clearInterval(a){const{delegate:s}=w;return(s?.clearInterval||clearInterval)(a)},delegate:void 0};var F=u(7908);const M={now:()=>(M.delegate||Date).now(),delegate:void 0};class v{constructor(s,i=v.now){this.schedulerActionCtor=s,this.now=i}schedule(s,i=0,e){return new this.schedulerActionCtor(this,s).schedule(e,i)}}v.now=M.now;const E=new class G extends v{constructor(s,i=v.now){super(s,i),this.actions=[],this._active=!1}flush(s){const{actions:i}=this;if(this._active)return void i.push(s);let e;this._active=!0;do{if(e=s.execute(s.state,s.delay))break}while(s=i.shift());if(this._active=!1,e){for(;s=i.shift();)s.unsubscribe();throw e}}}(class $ extends U{constructor(s,i){super(s,i),this.scheduler=s,this.work=i,this.pending=!1}schedule(s,i=0){var e;if(this.closed)return this;this.state=s;const o=this.id,n=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(n,o,i)),this.pending=!0,this.delay=i,this.id=null!==(e=this.id)&&void 0!==e?e:this.requestAsyncId(n,this.id,i),this}requestAsyncId(s,i,e=0){return w.setInterval(s.flush.bind(s,this),e)}recycleAsyncId(s,i,e=0){if(null!=e&&this.delay===e&&!1===this.pending)return i;null!=i&&w.clearInterval(i)}execute(s,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const e=this._execute(s,i);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,i){let o,e=!1;try{this.work(s)}catch(n){e=!0,o=n||new Error("Scheduled action threw falsy error")}if(e)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:s,scheduler:i}=this,{actions:e}=i;this.work=this.state=this.scheduler=null,this.pending=!1,(0,F.o)(e,this),null!=s&&(this.id=this.recycleAsyncId(i,s,null)),this.delay=null,super.unsubscribe()}}});var z=u(9470);var P=u(5558),A=u(9974),H=u(4360);function O(a,s=!1){return(0,A.N)((i,e)=>{let o=0;i.subscribe((0,H._)(e,n=>{const r=a(n,o++);(r||s)&&e.next(n),!r&&e.complete()}))})}var B=u(8141),N=u(9437);let Y=(()=>{var a;class s{constructor(e){this.http=e,this.BASE_URL="https://api.arting.ai/api"}getSignedUrl(e){return this.http.post(`${this.BASE_URL}/cg/get_oss_signed_urls`,{f_suffixs:[e]}).pipe((0,P.n)(n=>{const r=n.data.oss_signed_urls[0];return(0,b.of)({put:r.put,get:r.get})}))}uploadFileToSignedUrl(e,o){const n=new _.Lr({"Content-Type":o.type});return this.http.put(e,o,{headers:n,observe:"response"})}startSwapTask(e){const{video:o,image:n,taskOptions:r}=e,p={task_type:2,file_type:"video",target_medio_url:o.remoteGetUrl,target_source_face_url:n.remoteGetUrl,duration:r.duration,start_clip_sec:r.start_clip_sec,end_clip_sec:r.end_clip_sec,face_enhance:r.face_enhance},l=new _.Lr({"content-type":"application/json",authorization:r.auth_token});return this.http.post(`${this.BASE_URL}/fs/gifvideo/mutilface`,p,{headers:l}).pipe((0,P.n)(g=>(0,b.of)(g.data)))}pollTaskStatus(e,o){return function V(a=0,s,i=E){let e=-1;return null!=s&&((0,z.m)(s)?i=s:e=s),new j.c(o=>{let n=function D(a){return a instanceof Date&&!isNaN(a)}(a)?+a-i.now():a;n<0&&(n=0);let r=0;return i.schedule(function(){o.closed||(o.next(r++),0<=e?this.schedule(void 0,e):o.complete())},n)})}(0,1e4).pipe(O(r=>r<60,!0),(0,P.n)(()=>{const r=new FormData;r.append("prediction_id",e),r.append("task_type","2"),r.append("rank","");const p=new _.Lr({authorization:o});return this.http.post(`${this.BASE_URL}/mfs/gifvideo/task/status`,r,{headers:p}).pipe((0,B.M)(l=>{}),(0,N.W)(l=>(console.error("Polling error:",l),(0,b.of)({data:{status:"fail"}}))))}),O(r=>"success"!==r.data.status&&"fail"!==r.data.status,!0),(0,P.n)(r=>(0,b.of)(r.data)))}static#t=a=()=>(this.\u0275fac=function(o){return new(o||s)(d.KVO(_.Qq))},this.\u0275prov=d.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}))}return a(),s})();const S="faceswap_media",I="faceswap_tasks";let X=(()=>{var a;class s{constructor(){}save(e,o){localStorage.setItem(e,JSON.stringify(o))}load(e){const o=localStorage.getItem(e);return o?JSON.parse(o):null}saveMedia(e){this.save(S,e)}loadMedia(){return this.load(S)||[]}saveTasks(e){this.save(I,e)}loadTasks(){return this.load(I)||[]}static#t=a=()=>(this.\u0275fac=function(o){return new(o||s)},this.\u0275prov=d.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}))}return a(),s})();function L(a,s){if(1&a&&t.nrm(0,"ion-progress-bar",41),2&a){const i=t.XpG().$implicit;t.Y8G("value",i.uploadProgress/100)}}function K(a,s){if(1&a){const i=t.RV6();t.j41(0,"div",34)(1,"ion-thumbnail",35),t.nrm(2,"video",36),t.DNE(3,L,1,1,"ion-progress-bar",37),t.nrm(4,"ion-icon",38),t.j41(5,"ion-button",39),t.bIt("click",function(){const o=d.eBV(i).$implicit,n=t.XpG(2);return d.Njj(n.removeMedia(o))}),t.nrm(6,"ion-icon",40),t.k0s()()()}if(2&a){const i=s.$implicit;t.R7$(2),t.Y8G("src",i.localUrl,t.B4B),t.R7$(),t.Y8G("ngIf","uploading"===i.status),t.R7$(),t.Y8G("name","uploaded"===i.status?"cloud-done-outline":"fail"===i.status?"alert-circle-outline":"cloud-upload-outline")("color","uploaded"===i.status?"success":"fail"===i.status?"danger":"warning")}}function J(a,s){if(1&a&&t.nrm(0,"ion-progress-bar",41),2&a){const i=t.XpG().$implicit;t.Y8G("value",i.uploadProgress/100)}}function W(a,s){if(1&a){const i=t.RV6();t.j41(0,"div",34)(1,"ion-thumbnail",42),t.nrm(2,"ion-img",43),t.DNE(3,J,1,1,"ion-progress-bar",37),t.nrm(4,"ion-icon",38),t.j41(5,"ion-button",39),t.bIt("click",function(){const o=d.eBV(i).$implicit,n=t.XpG(2);return d.Njj(n.removeMedia(o))}),t.nrm(6,"ion-icon",40),t.k0s()()()}if(2&a){const i=s.$implicit;t.R7$(2),t.Y8G("src",i.localUrl),t.R7$(),t.Y8G("ngIf","uploading"===i.status),t.R7$(),t.Y8G("name","uploaded"===i.status?"cloud-done-outline":"fail"===i.status?"alert-circle-outline":"cloud-upload-outline")("color","uploaded"===i.status?"success":"fail"===i.status?"danger":"warning")}}function Z(a,s){if(1&a){const i=t.RV6();t.j41(0,"div",21)(1,"ion-grid")(2,"ion-row")(3,"ion-col",22)(4,"h3",23),t.EFF(5),t.k0s(),t.j41(6,"ion-button",24),t.nrm(7,"ion-icon",25),t.EFF(8," Select Videos "),t.k0s(),t.j41(9,"input",26),t.bIt("change",function(o){d.eBV(i);const n=t.XpG();return d.Njj(n.onFileSelect(o,"video"))}),t.k0s(),t.j41(10,"div",27),t.DNE(11,K,7,4,"div",28),t.k0s()(),t.j41(12,"ion-col",29)(13,"h3",23),t.EFF(14),t.k0s(),t.j41(15,"ion-button",30),t.nrm(16,"ion-icon",31),t.EFF(17," Select Images "),t.k0s(),t.j41(18,"input",32),t.bIt("change",function(o){d.eBV(i);const n=t.XpG();return d.Njj(n.onFileSelect(o,"image"))}),t.k0s(),t.j41(19,"div",27),t.DNE(20,W,7,4,"div",28),t.j41(21,"ion-item")(22,"ion-toggle",33),t.mxI("ngModelChange",function(o){d.eBV(i);const n=t.XpG();return t.DH7(n.taskDefaults.face_enhance,o)||(n.taskDefaults.face_enhance=o),d.Njj(o)}),t.k0s()()()()()()()}if(2&a){const i=t.XpG();t.R7$(5),t.SpI("Target Videos (",i.uploadedVideos.length,")"),t.R7$(6),t.Y8G("ngForOf",i.uploadedVideos),t.R7$(3),t.SpI("Source Faces (",i.uploadedImages.length,")"),t.R7$(6),t.Y8G("ngForOf",i.uploadedImages),t.R7$(2),t.R50("ngModel",i.taskDefaults.face_enhance)}}function Q(a,s){if(1&a){const i=t.RV6();t.qex(0),t.j41(1,"ion-button",56),t.bIt("click",function(){d.eBV(i);const o=t.XpG().$implicit,n=t.XpG();return d.Njj(n.startSwap(o))}),t.nrm(2,"ion-icon",57),t.k0s(),t.bVm()}}function q(a,s){if(1&a){const i=t.RV6();t.qex(0),t.j41(1,"ion-button",58),t.bIt("click",function(){d.eBV(i);const o=t.XpG().$implicit,n=t.XpG();return d.Njj(n.directDownload(o))}),t.nrm(2,"ion-icon",59),t.k0s(),t.j41(3,"ion-button",60),t.nrm(4,"ion-icon",61),t.k0s(),t.bVm()}if(2&a){const i=t.XpG().$implicit;t.R7$(3),t.Y8G("href",i.outputUrl)}}function tt(a,s){1&a&&t.nrm(0,"ion-spinner",62)}function et(a,s){if(1&a){const i=t.RV6();t.j41(0,"ion-col",44)(1,"div")(2,"ion-row")(3,"ion-col",45)(4,"div",46)(5,"div",47)(6,"ion-thumbnail",35),t.nrm(7,"video",36),t.k0s()(),t.nrm(8,"ion-icon",48),t.j41(9,"div",47)(10,"ion-thumbnail",42),t.nrm(11,"ion-img",43),t.k0s()()()(),t.j41(12,"ion-col",49),t.DNE(13,Q,3,0,"ng-container",50),t.j41(14,"ion-button",51),t.bIt("click",function(){const o=d.eBV(i).$implicit,n=t.XpG();return d.Njj(n.removeTask(o))}),t.nrm(15,"ion-icon",52),t.k0s(),t.DNE(16,q,5,1,"ng-container",50),t.j41(17,"div",53)(18,"ion-chip",54)(19,"ion-label"),t.EFF(20),t.nI1(21,"uppercase"),t.k0s(),t.DNE(22,tt,1,0,"ion-spinner",55),t.k0s()()()()()()}if(2&a){const i=s.$implicit,e=t.XpG();t.R7$(),t.HbH(t.VkB("task-card-wrapper ",i.status)),t.R7$(6),t.Y8G("src",i.video.localUrl,t.B4B),t.R7$(4),t.Y8G("src",i.image.localUrl),t.R7$(2),t.Y8G("ngIf","ready"===i.status||"fail"===i.status),t.R7$(3),t.Y8G("ngIf",("success"===i.status||"downloading"===i.status||"downloaded"===i.status||"download_failed"===i.status)&&i.outputUrl),t.R7$(2),t.Y8G("color",e.getChipColor(i.status)),t.R7$(2),t.JRh(t.bMT(21,10,i.status)),t.R7$(2),t.Y8G("ngIf","processing"===i.status)}}function nt(a,s){1&a&&(t.j41(0,"ion-item",63)(1,"ion-label",64),t.EFF(2,"Upload at least one **Video** and one **Image** to create swap tasks."),t.k0s()())}const ot=[{path:"",component:(()=>{var a;class s{constructor(e,o,n,r,p){this.faceSwapService=e,this.persistenceService=o,this.toastController=n,this.alertController=r,this.loadingController=p,this.uploadedVideos=[],this.uploadedImages=[],this.swapTasks=[],this.activeSegment="media",this.taskDefaults={duration:100,start_clip_sec:0,end_clip_sec:100,face_enhance:!0},this.pollingSubs=new Map}ngOnInit(){this.loadState(),this.swapTasks.filter(e=>"processing"===e.status).forEach(e=>{this.resumeTaskPolling(e)})}startAllReadyTasks(){const e=this.swapTasks.filter(o=>"ready"===o.status||"fail"===o.status);0!==e.length?(e.forEach(o=>this.startSwap(o)),this.presentToast(`Starting ${e.length} swap tasks.`,"primary")):this.presentToast("No tasks are currently ready or fail to start.","medium")}loadState(){const e=this.persistenceService.loadMedia(),o=[];e.forEach(n=>{if("uploaded"===n.status&&n.remoteGetUrl){const r={id:n.id,file:new File([],n.remoteGetUrl,{type:"video"===n.type?"video/mp4":"image/png"}),type:n.type,status:"uploaded",localUrl:n.remoteGetUrl,uploadProgress:100,remoteGetUrl:n.remoteGetUrl,suffix:n.suffix,remotePutUrl:void 0,isRemote:!0};o.push(r)}}),this.uploadedVideos=o.filter(n=>"video"===n.type),this.uploadedImages=o.filter(n=>"image"===n.type),this.swapTasks=this.persistenceService.loadTasks(),this.swapTasks.forEach((n,r)=>{const p=this.uploadedVideos.find(g=>g.id===n.video.id),l=this.uploadedImages.find(g=>g.id===n.image.id);p&&l?(n.video=p,n.image=l,"processing"===n.status&&n.prediction_id&&this.resumeTaskPolling(n)):(this.swapTasks[r].status="fail",this.swapTasks[r].prediction_id=void 0)}),(this.uploadedVideos.length>0||this.uploadedImages.length>0)&&this.presentToast("Previous session restored.","primary")}saveState(){const e=[...this.uploadedVideos,...this.uploadedImages];this.persistenceService.saveMedia(e),this.persistenceService.saveTasks(this.swapTasks)}onFileSelect(e,o){var n=this;return(0,h.A)(function*(){const r=e.target.files;if(r)for(let p=0;p<r.length;p++){const l=r[p],g=l.name.split(".").pop()||"",f={id:crypto.randomUUID(),file:l,type:o,status:"pending",localUrl:URL.createObjectURL(l),uploadProgress:0,suffix:g,isRemote:!0};"video"===o?n.uploadedVideos.push(f):n.uploadedImages.push(f),n.saveState(),n.uploadMedia(f)}})()}uploadMedia(e){var o=this;return(0,h.A)(function*(){e.status="uploading",o.saveState();try{const{put:n,get:r}=yield o.faceSwapService.getSignedUrl(e.suffix).toPromise();e.remotePutUrl=n,e.remoteGetUrl=r,yield o.faceSwapService.uploadFileToSignedUrl(n,e.file).toPromise(),e.status="uploaded",e.uploadProgress=100,e.localUrl=e.remoteGetUrl,o.saveState(),o.presentToast(`${e.file.name} uploaded successfully.`,"success"),o.updateTasks()}catch(n){console.error("Upload fail:",n),e.status="fail",o.saveState(),o.presentToast(`Upload of ${e.file.name} fail.`,"danger")}})()}updateTasks(){const e=this.uploadedVideos.filter(l=>"uploaded"===l.status),o=this.uploadedImages.filter(l=>"uploaded"===l.status),n=[];e.forEach(l=>{o.forEach(g=>{this.swapTasks.find(m=>m.video.id===l.id&&m.image.id===g.id)||n.push({id:crypto.randomUUID(),video:l,image:g,taskOptions:{...this.taskDefaults,auth_token:crypto.randomUUID()},status:"ready",downloadStarted:!1,downloadCompleted:!1})})}),n.map(l=>l.id);const p=new Set([...e.map(l=>l.id),...o.map(l=>l.id)]);this.swapTasks=this.swapTasks.filter(l=>p.has(l.video.id)&&p.has(l.image.id)),this.swapTasks=[...this.swapTasks,...n],this.saveState()}startSwap(e){var o=this;return(0,h.A)(function*(){if("ready"===e.status||"fail"===e.status){e.status="processing",o.saveState();try{const{prediction_id:n}=yield o.faceSwapService.startSwapTask(e).toPromise();e.prediction_id=n,o.saveState(),o.resumeTaskPolling(e)}catch(n){console.error("Task start fail:",n),e.status="fail",o.saveState(),o.presentToast(`Swap for ${e.video.file.name} fail to start.`,"danger")}}})()}resumeTaskPolling(e){if(!e.prediction_id)return console.error("Cannot resume: missing prediction_id"),e.status="fail",void this.saveState();this.stopPolling(e.id);const o=this.faceSwapService.pollTaskStatus(e.prediction_id,e.taskOptions.auth_token).subscribe({next:n=>{e.status="waiting"===n.status?"processing":n.status,"success"===e.status?(e.outputUrl=n.output,this.stopPolling(e.id),this.presentToast(`Swap for ${e.video.file.name} successful!`,"success")):"fail"===e.status&&(this.stopPolling(e.id),this.presentToast(`Swap for ${e.video.file.name} fail.`,"danger")),this.saveState()},error:n=>{console.error("Polling complete with error:",n),e.status="fail",this.stopPolling(e.id),this.saveState(),this.presentToast(`Polling error for ${e.video.file.name}.`,"danger")}});this.pollingSubs.set(e.id,o)}stopPolling(e){this.pollingSubs.has(e)&&(this.pollingSubs.get(e)?.unsubscribe(),this.pollingSubs.delete(e))}presentToast(e){var o=this;return(0,h.A)(function*(n,r="medium"){(yield o.toastController.create({message:n,duration:3e3,color:r})).present()}).apply(this,arguments)}removeMedia(e){const o="video"===e.type?this.uploadedVideos:this.uploadedImages,n=o.findIndex(r=>r.id===e.id);n>-1&&(o.splice(n,1),URL.revokeObjectURL(e.localUrl),this.updateTasks(),this.saveState())}getChipColor(e){switch(e){case"ready":return"warning";case"processing":case"downloading":return"primary";case"success":case"downloaded":return"success";case"fail":return"danger";default:return"medium"}}getChipColor2(e){switch(e){case"ready":return"yellow";case"processing":return"blue";case"success":return"green";case"fail":return"red";default:return"grey"}}ngOnDestroy(){this.pollingSubs.forEach(e=>e.unsubscribe())}removeTask(e){this.stopPolling(e.id);const o=this.swapTasks.findIndex(n=>n.id===e.id);o>-1&&(this.swapTasks.splice(o,1),this.presentToast(`Task for ${e.video.file.name} removed.`,"medium")),this.saveState()}get readyOrfailTaskCount(){return(this.swapTasks??[]).filter(e=>"ready"===e.status||"fail"===e.status).length}get hasTasksToStart(){return this.readyOrfailTaskCount>0}removeAllVideoTasks(){0!==this.swapTasks.length||0!==this.uploadedVideos.length?(this.swapTasks.forEach(e=>this.stopPolling(e.id)),this.swapTasks=[],this.uploadedVideos.forEach(e=>URL.revokeObjectURL(e.localUrl)),this.uploadedVideos=[],this.saveState(),this.presentToast("All tasks and videos cleared. Source images remain.","success")):this.presentToast("No videos or tasks to clear.","medium")}get processingTaskCount(){return(this.swapTasks??[]).filter(e=>"processing"===e.status).length}get failedTaskCount(){return(this.swapTasks??[]).filter(e=>"fail"===e.status).length}get successTaskCount(){return(this.swapTasks??[]).filter(e=>"success"===e.status).length}get readyTaskCount(){return(this.swapTasks??[]).filter(e=>"ready"===e.status).length}get downloadingTaskCount(){return(this.swapTasks??[]).filter(e=>"downloading"===e.status).length}get completedTaskCount(){return(this.swapTasks??[]).filter(e=>"downloaded"===e.status).length}directDownload(e){var o=this;return(0,h.A)(function*(){return new Promise(function(){var n=(0,h.A)(function*(r,p){if(!e.outputUrl)return o.presentToast("Output URL not available.","danger"),!1;e.downloadStarted=!0,e.status="downloading";const l="swapped_"+ +new Date+".mp4";try{o.presentToast(`Downloading ${l} (may take time)...`,"primary");const g=yield fetch(e.outputUrl).then(x=>{if(!x.ok)throw new Error(`HTTP error! status: ${x.status}`);return x.blob()}),f=URL.createObjectURL(g),m=document.createElement("a");return m.href=f,m.download=l,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(f),o.presentToast("Download started successfully.","success"),e.downloadCompleted=!0,e.status="downloaded",o.saveState(),!0}catch(g){return console.error("Download failed:",g),o.presentToast("Failed to download video.","danger"),e.status="download_failed",o.saveState(),!1}});return function(r,p){return n.apply(this,arguments)}}())})()}downloadAllTasks(){var e=this;return(0,h.A)(function*(){let o=(e.swapTasks??[]).filter(n=>n.outputUrl&&"downloading"!=n.status&&"downloaded"!=n.status);for(let n=0;n<o?.length;n++){const r=o[n];yield e.directDownload(r)}})()}static#t=a=()=>(this.\u0275fac=function(o){return new(o||s)(t.rXU(Y),t.rXU(X),t.rXU(c.K_),t.rXU(c.hG),t.rXU(c.Xi))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-home"]],standalone:!1,decls:44,vars:13,consts:[[1,"ion-padding"],["color","light"],[1,"ion-no-padding-top"],["class","media-content",4,"ngIf"],["color","light",1,"ion-margin-top"],[1,"ion-padding-bottom"],["size","4"],[1,"action-row","ion-align-items-center","ion-margin-top"],["size","12",1,"ion-no-padding"],["expand","block","color","success",3,"click","disabled"],["slot","start","name","play-skip-forward-outline"],["size","10",1,"ion-no-padding"],["expand","block","color","primary",3,"click"],["slot","start","name","download-outline"],["size","1",1,"ion-no-padding","ion-text-right"],["color","danger","fill","outline","size","default",1,"clear-all-btn-lg",3,"click","disabled"],["name","trash-bin-outline","slot","icon-only"],[1,"ion-no-padding-vertical"],[1,"task-grid"],["size","12","size-sm","6","size-md","4","size-lg","3","class","task-card-col",4,"ngFor","ngForOf"],["lines","none","class","ion-margin-top",4,"ngIf"],[1,"media-content"],["size","12","size-md","6",1,"ion-padding-bottom"],[1,"ion-text-center","ion-no-margin"],["expand","block","size","small","color","secondary","onclick","document.getElementById('videoFile').click()"],["slot","start","name","videocam-outline"],["type","file","id","videoFile","multiple","","accept","video/*","hidden","",3,"change"],[1,"media-container","ion-margin-top"],["class","media-item",4,"ngFor","ngForOf"],["size","12","size-md","6"],["expand","block","size","small","color","tertiary","onclick","document.getElementById('imageFile').click()"],["slot","start","name","image-outline"],["type","file","id","imageFile","multiple","","accept","image/*","hidden","",3,"change"],["color","tertiary",3,"ngModelChange","ngModel"],[1,"media-item"],[1,"rounded-border","video-thumb"],["preload","metadata",3,"src"],["color","tertiary",3,"value",4,"ngIf"],[1,"status-icon",3,"name","color"],["color","danger","size","small",1,"remove-btn",3,"click"],["name","close-circle"],["color","tertiary",3,"value"],[1,"rounded-border","image-thumb"],[3,"src"],["size","12","size-sm","6","size-md","4","size-lg","3",1,"task-card-col"],["size","5.5"],[1,"task-media-preview"],[1,"media-thumb-wrapper"],["name","swap-horizontal-outline","color","tertiary","size","small",1,"swap-icon"],["size","6.5"],[4,"ngIf"],["color","danger","size","small",3,"click"],["name","trash-bin-outline"],[1,"task-status-chip"],[3,"color"],["name","dots",4,"ngIf"],["color","primary","size","small",3,"click"],["name","play-circle-outline","slot","start"],["color","success","size","small",3,"click"],["name","download-outline"],["target","_blank","color","primary","size","small",3,"href"],["name","open-outline"],["name","dots"],["lines","none",1,"ion-margin-top"],[1,"ion-text-center","ion-padding-vertical"]],template:function(o,n){1&o&&(t.j41(0,"ion-content",0)(1,"ion-card",1)(2,"ion-card-content",2),t.DNE(3,Z,23,5,"div",3),t.k0s()(),t.j41(4,"ion-card",4)(5,"ion-card-header",5)(6,"ion-card-title",5),t.EFF(7),t.k0s(),t.j41(8,"ion-row")(9,"ion-col",6)(10,"ion-text"),t.EFF(11),t.k0s()(),t.j41(12,"ion-col",6)(13,"ion-text"),t.EFF(14),t.k0s()(),t.j41(15,"ion-col",6)(16,"ion-text"),t.EFF(17),t.k0s()(),t.j41(18,"ion-col",6)(19,"ion-text"),t.EFF(20),t.k0s()(),t.j41(21,"ion-col",6)(22,"ion-text"),t.EFF(23),t.k0s()(),t.j41(24,"ion-col",6)(25,"ion-text"),t.EFF(26),t.k0s()()(),t.j41(27,"ion-row",7)(28,"ion-col",8)(29,"ion-button",9),t.bIt("click",function(){return n.startAllReadyTasks()}),t.nrm(30,"ion-icon",10),t.EFF(31),t.k0s()(),t.j41(32,"ion-col",11)(33,"ion-button",12),t.bIt("click",function(){return n.downloadAllTasks()}),t.nrm(34,"ion-icon",13),t.EFF(35," Download All "),t.k0s()(),t.j41(36,"ion-col",14)(37,"ion-button",15),t.bIt("click",function(){return n.removeAllVideoTasks()}),t.nrm(38,"ion-icon",16),t.k0s()()()(),t.j41(39,"ion-card-content",17)(40,"ion-grid",18)(41,"ion-row"),t.DNE(42,et,23,12,"ion-col",19),t.k0s()(),t.DNE(43,nt,3,0,"ion-item",20),t.k0s()()()),2&o&&(t.R7$(3),t.Y8G("ngIf","media"===n.activeSegment),t.R7$(4),t.SpI("2. Face Swap Tasks (",n.swapTasks.length,")"),t.R7$(4),t.SpI("Ready: ",n.readyTaskCount),t.R7$(3),t.SpI("Processing: ",n.processingTaskCount),t.R7$(3),t.SpI("Failed: ",n.failedTaskCount),t.R7$(3),t.SpI("Success: ",n.successTaskCount),t.R7$(3),t.SpI("Downloading: ",n.downloadingTaskCount),t.R7$(3),t.SpI("Downloaded: ",n.completedTaskCount),t.R7$(3),t.Y8G("disabled",!n.hasTasksToStart),t.R7$(2),t.SpI(" Start All Conversions (",n.readyOrfailTaskCount,") "),t.R7$(6),t.Y8G("disabled",0===n.swapTasks.length&&0===n.uploadedVideos.length),t.R7$(5),t.Y8G("ngForOf",n.swapTasks),t.R7$(),t.Y8G("ngIf",!n.swapTasks.length))},dependencies:[k.Sq,k.bT,C.BC,C.vS,c.Jm,c.b_,c.I9,c.ME,c.tN,c.ZB,c.hU,c.W9,c.lO,c.iq,c.KW,c.uz,c.he,c.FH,c.ln,c.w2,c.IO,c.Zx,c.BY,c.hB,k.Pc],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: #4A148C}ion-content[_ngcontent-%COMP%]{--ion-background-color: #f0f4f8}ion-card[_ngcontent-%COMP%]{box-shadow:0 4px 15px #0000001a;border-radius:12px}ion-card-header.minimal-header[_ngcontent-%COMP%]{padding-bottom:0}ion-segment[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.minimal-setting-item[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px}.minimal-setting-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem;margin-top:0;margin-bottom:5px;color:var(--ion-color-medium-shade)}.ultra-minimal-input[_ngcontent-%COMP%]{--inner-padding-top: 5px;--inner-padding-bottom: 5px;--padding-start: 0;--padding-end: 0}.ultra-minimal-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:.9rem}.ultra-minimal-input[_ngcontent-%COMP%]   ion-label[position=stacked][_ngcontent-%COMP%]{margin-bottom:3px;font-size:.8rem;font-weight:700}.clip-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--ion-color-medium)}ion-button[color=secondary][_ngcontent-%COMP%]{--background: #00BCD4}ion-button[color=tertiary][_ngcontent-%COMP%]{--background: #FF4081}.media-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;justify-content:center}.media-item[_ngcontent-%COMP%]{width:50px;text-align:center;position:relative;height:100px}.media-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.7rem;margin-top:5px;color:#333}.media-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px}.rounded-border[_ngcontent-%COMP%]{--border-radius: 8px;overflow:hidden;position:relative;border:3px solid var(--ion-color-tertiary);box-shadow:0 2px 5px #0003}.rounded-border[_ngcontent-%COMP%]   video[_ngcontent-%COMP%], .rounded-border[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{display:block;width:100%;height:100%;object-fit:cover}.status-icon[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;font-size:1.2rem;background:#fff;border-radius:50%;padding:1px;z-index:10}.remove-btn[_ngcontent-%COMP%]{position:absolute;top:-5px;left:-5px;z-index:10;--padding-start: 0;--padding-end: 0;--box-shadow: none;--background: var(--ion-color-danger);border-radius:50%}.task-card[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;--min-height: 110px;border-bottom:1px solid #ddd}.task-card[_ngcontent-%COMP%]:last-child{border-bottom:none}ion-chip[_ngcontent-%COMP%]{min-width:80px;justify-content:center}.task-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-bottom:5px!important}.task-actions[_ngcontent-%COMP%]   ion-button[fill=clear][_ngcontent-%COMP%]{margin-top:-5px!important}ion-card-content.ion-no-padding-vertical[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.task-grid[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.task-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{align-items:stretch}.task-card-col[_ngcontent-%COMP%]{padding:8px}.task-card-wrapper[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 2px 8px #0000001a;padding:12px 0 0 12px;height:100%;display:flex;flex-direction:column;transition:all .2s ease-in-out}.task-card-wrapper.fail[_ngcontent-%COMP%]{border:2px solid var(--ion-color-danger)}.task-card-wrapper[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.task-media-preview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.media-thumb-wrapper[_ngcontent-%COMP%]{width:auto;height:70px}.video-thumb[_ngcontent-%COMP%], .image-thumb[_ngcontent-%COMP%]{--size: 100%;margin:0;border:none}.video-thumb[_ngcontent-%COMP%]   .rounded-border[_ngcontent-%COMP%], .image-thumb[_ngcontent-%COMP%]   .rounded-border[_ngcontent-%COMP%]{border:2px solid var(--ion-color-primary)}.swap-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--ion-color-tertiary)}.task-status-chip[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}.task-status-chip[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{min-width:100px;font-size:.75rem}.task-details[_ngcontent-%COMP%]{flex-grow:1;margin-bottom:10px}.task-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;margin-top:2px;color:#555}.task-details[_ngcontent-%COMP%]   .status-message[_ngcontent-%COMP%]{font-weight:700}.task-actions-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center}.task-actions-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 5px;--padding-end: 5px;font-size:.75rem;height:30px;margin:0 2px}.task-actions-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:not([expand=block]){width:45%}@media (max-width: 576px){.task-actions-footer[_ngcontent-%COMP%]{flex-direction:column}.task-actions-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%;margin:2px 0}}.task-media-preview[_ngcontent-%COMP%]   video[_ngcontent-%COMP%], .task-media-preview[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%}.header-with-actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-bottom:0}.header-with-actions[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{flex-grow:1;margin-right:10px}.header-with-actions[_ngcontent-%COMP%]   ion-button[expand=block][_ngcontent-%COMP%]{margin-top:0!important}.clear-all-btn[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;margin:0 0 10px}.stats-bar[_ngcontent-%COMP%]{margin-bottom:10px}.stat-tile[_ngcontent-%COMP%]{background:#fff;padding:10px;text-align:center;border-radius:8px;box-shadow:0 2px 5px #0000001a;height:100%;border-left:5px solid}.stat-tile.primary[_ngcontent-%COMP%]{border-color:var(--ion-color-primary)}.stat-tile.warning[_ngcontent-%COMP%]{border-color:var(--ion-color-warning)}.stat-tile.danger[_ngcontent-%COMP%]{border-color:var(--ion-color-danger)}.stat-tile.success[_ngcontent-%COMP%]{border-color:var(--ion-color-success)}.stat-tile[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2rem;opacity:.6}.stat-tile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;color:var(--ion-color-medium);margin:0}.stat-tile[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin:0;font-weight:600;color:#333}.action-row[_ngcontent-%COMP%]{width:100%}.action-row[_ngcontent-%COMP%]   .clear-all-btn-lg[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;height:40px}"]}))}return a(),s})()}];let it=(()=>{var a;class s{static#t=a=()=>(this.\u0275fac=function(o){return new(o||s)},this.\u0275mod=t.$C({type:s}),this.\u0275inj=d.G2t({imports:[T.iI.forChild(ot),T.iI]}))}return a(),s})(),st=(()=>{var a;class s{static#t=a=()=>(this.\u0275fac=function(o){return new(o||s)},this.\u0275mod=t.$C({type:s}),this.\u0275inj=d.G2t({imports:[k.MD,C.YN,c.bv,it,_.q1]}))}return a(),s})()}}]);